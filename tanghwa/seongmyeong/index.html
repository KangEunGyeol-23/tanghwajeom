<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>당화 - 성명학</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a3e, #2d1b69);
            min-height: 100vh;
            color: #ffffff;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .title {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #FFD700, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.1em;
            color: #B8B8D4;
            letter-spacing: 2px;
        }
        
        .input-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-group label {
            display: block;
            font-size: 1.1em;
            color: #FFD700;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1em;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .analyze-btn {
            width: 100%;
            padding: 18px;
            font-size: 1.2em;
            font-weight: bold;
            background: linear-gradient(135deg, #FFD700, #FF6B6B);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.4);
        }
        
        .result {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-top: 30px;
        }
        
        .result-title {
            text-align: center;
            font-size: 1.8em;
            background: linear-gradient(135deg, #FFD700, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
        }
        
        .ganzi-info {
            text-align: center;
            font-size: 1.3em;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .char-analysis {
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .char-title {
            font-size: 1.4em;
            color: #FFD700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .char-details {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4ECDC4;
        }
        
        .sipseong-result {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
        }
        
        .sipseong-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .sipseong-line:last-child {
            margin-bottom: 0;
        }
        
        .sipseong-number {
            color: #FF6B6B;
            font-size: 1.2em;
        }
        
        .sipseong-name {
            color: #4ECDC4;
        }
        
        .char-center {
            color: #FFD700;
            font-size: 1.3em;
        }
        
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: #ffffff;
            text-decoration: none;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-btn">← 돌아가기</a>
    
    <div class="container">
        <div class="header">
            <h1 class="title">🔮 성명학 분석</h1>
            <p class="subtitle">이름과 생년월일로 운명을 읽다</p>
        </div>
        
        <div class="input-section">
            <div class="input-group">
                <label for="nameInput">이름</label>
                <input type="text" id="nameInput" placeholder="이름을 입력하세요 (예: 강은결)">
            </div>
            
            <div class="input-group">
                <label for="yearInput">태어난 년도</label>
                <input type="number" id="yearInput" placeholder="년도를 입력하세요 (예: 1979)">
            </div>
            
            <button class="analyze-btn" onclick="analyzeName()">🌟 성명학 분석하기</button>
        </div>
        
        <div id="result"></div>
    </div>

    <script>
        // 자음 획수 (당신의 시스템)
        const consonantStrokes = {
            'ㄱ': 1, 'ㄴ': 1, 'ㄷ': 2, 'ㄹ': 3, 'ㅁ': 3, 'ㅂ': 4, 'ㅅ': 2,
            'ㅇ': 1, 'ㅈ': 3, 'ㅊ': 4, 'ㅋ': 2, 'ㅌ': 3, 'ㅍ': 4, 'ㅎ': 3,
            'ㄲ': 2, 'ㄸ': 4, 'ㅃ': 8, 'ㅆ': 4, 'ㅉ': 6
        };
        
        // 모음 획수 (획순 기준)
        const vowelStrokes = {
            'ㅏ': 2, 'ㅑ': 3, 'ㅓ': 2, 'ㅕ': 3, 'ㅗ': 2, 'ㅛ': 3, 
            'ㅜ': 2, 'ㅠ': 3, 'ㅡ': 1, 'ㅣ': 1, 'ㅐ': 3, 'ㅒ': 4, 
            'ㅔ': 3, 'ㅖ': 4, 'ㅘ': 4, 'ㅙ': 5, 'ㅚ': 4, 'ㅝ': 4, 
            'ㅞ': 5, 'ㅟ': 4, 'ㅢ': 2
        };
        
        // 자음 → 오행 + 음양 변환
        const consonantToElement = {
            'ㄱ': '木', 'ㅋ': '木',
            'ㄴ': '火', 'ㄷ': '火', 'ㄹ': '火', 'ㅌ': '火',
            'ㅇ': '土', 'ㅎ': '土',
            'ㅅ': '金', 'ㅈ': '金', 'ㅊ': '金',
            'ㅁ': '水', 'ㅂ': '水', 'ㅍ': '水',
            'ㄲ': '木', 'ㄸ': '火', 'ㅃ': '水', 'ㅆ': '金', 'ㅉ': '金'
        };
        
        // 오행별 천간 (양음)
        const elementToCheongan = {
            '木': ['甲', '乙'],  // [양, 음]
            '火': ['丙', '丁'],
            '土': ['戊', '己'],
            '金': ['庚', '辛'],
            '水': ['壬', '癸']
        };
        
        // 십성 이름
        const sipseongNames = [
            '정인', '비견', '겁재', '식신', '상관', '편재', '정재', '편관', '정관', '편인'
        ];
        
        // 한글 분해 함수
        function hangulDecompose(char) {
            const charCode = char.charCodeAt(0);
            if (charCode < 0xAC00 || charCode > 0xD7A3) return null;
            
            const index = charCode - 0xAC00;
            const initial = Math.floor(index / 588);
            const medial = Math.floor((index % 588) / 28);
            const final = index % 28;
            
            const initials = ['ㄱ','ㄲ','ㄴ','ㄷ','ㄸ','ㄹ','ㅁ','ㅂ','ㅃ','ㅅ','ㅆ','ㅇ','ㅈ','ㅉ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'];
            const medials = ['ㅏ','ㅐ','ㅑ','ㅒ','ㅓ','ㅔ','ㅕ','ㅖ','ㅗ','ㅘ','ㅙ','ㅚ','ㅛ','ㅜ','ㅝ','ㅞ','ㅟ','ㅠ','ㅡ','ㅢ','ㅣ'];
            const finals = ['','ㄱ','ㄲ','ㄱㅅ','ㄴ','ㄴㅈ','ㄴㅎ','ㄷ','ㄹ','ㄹㄱ','ㄹㅁ','ㄹㅂ','ㄹㅅ','ㄹㅌ','ㄹㅍ','ㄹㅎ','ㅁ','ㅂ','ㅂㅅ','ㅅ','ㅆ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'];
            
            return {
                initial: initials[initial],
                medial: medials[medial],
                final: final === 0 ? '' : finals[final]
            };
        }
        
        // 간지 계산
        function getGanJi(year) {
            const gan = ['갑', '을', '병', '정', '무', '기', '경', '신', '임', '계'];
            const ji = ['자', '축', '인', '묘', '진', '사', '오', '미', '신', '유', '술', '해'];
            const ganHanja = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];
            const jiHanja = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];
            
            const baseYear = -2636;
            const yearDiff = year - baseYear;
            
            const ganIndex = (yearDiff - 1) % 10;
            const jiIndex = (yearDiff - 1) % 12;
            
            return {
                ganKorean: gan[ganIndex],
                jiKorean: ji[jiIndex],
                ganHanja: ganHanja[ganIndex],
                jiHanja: jiHanja[jiIndex],
                fullKorean: gan[ganIndex] + ji[jiIndex] + '년',
                fullHanja: ganHanja[ganIndex] + jiHanja[jiIndex]
            };
        }
        
        // 십성 계산
        function calculateSipseong(myElement, targetElement) {
            // 오행 관계 확인
            const relations = {
                '木': { generates: '火', destroys: '土', generatedBy: '水', destroyedBy: '金' },
                '火': { generates: '土', destroys: '金', generatedBy: '木', destroyedBy: '水' },
                '土': { generates: '金', destroys: '水', generatedBy: '火', destroyedBy: '木' },
                '金': { generates: '水', destroys: '木', generatedBy: '土', destroyedBy: '火' },
                '水': { generates: '木', destroys: '火', generatedBy: '金', destroyedBy: '土' }
            };
            
            const myElementType = myElement[0]; // 오행
            const myYinYang = myElement[1]; // 음양 (+/-)
            const targetElementType = targetElement[0];
            const targetYinYang = targetElement[1];
            
            const sameYinYang = myYinYang === targetYinYang;
            
            // 십성 판단
            if (myElementType === targetElementType) {
                return sameYinYang ? 1 : 2; // 비견 : 겁재
            } else if (relations[myElementType].generates === targetElementType) {
                return sameYinYang ? 3 : 4; // 식신 : 상관
            } else if (relations[myElementType].destroys === targetElementType) {
                return sameYinYang ? 5 : 6; // 편재 : 정재
            } else if (relations[myElementType].destroyedBy === targetElementType) {
                return sameYinYang ? 7 : 8; // 편관 : 정관
            } else if (relations[myElementType].generatedBy === targetElementType) {
                return sameYinYang ? 9 : 0; // 편인 : 정인
            }
            
            return 0;
        }
        
        // 천간 변환 (오행 + 음양 → 천간한자)
        function getCheonganHanja(element, isPositive) {
            const cheongans = elementToCheongan[element];
            return isPositive ? cheongans[0] : cheongans[1];
        }
        
        function analyzeName() {
            const name = document.getElementById('nameInput').value.trim();
            const year = parseInt(document.getElementById('yearInput').value);
            
            if (!name || !year) {
                alert('이름과 태어난 년도를 모두 입력해주세요.');
                return;
            }
            
            const ganJi = getGanJi(year);
            
            let resultHTML = `
                <div class="result-title">🔮 ${name}님의 성명학 분석 결과</div>
                <div class="ganzi-info">
                    <strong>태어난 해:</strong> ${year}년 ${ganJi.fullKorean} (${ganJi.fullHanja})
                </div>
            `;
            
            // 각 글자 분석
            for (let i = 0; i < name.length; i++) {
                const char = name[i];
                const decomposed = hangulDecompose(char);
                
                if (!decomposed) continue;
                
                const {initial, medial, final} = decomposed;
                
                // 총 획수 계산
                let totalStrokes = 0;
                totalStrokes += consonantStrokes[initial] || 0;
                totalStrokes += vowelStrokes[medial] || 0;
                if (final) totalStrokes += consonantStrokes[final] || 0;
                
                // 음양 결정
                const isPositive = totalStrokes % 2 === 1;
                const yinYangSymbol = isPositive ? '+' : '-';
                const yinYangName = isPositive ? '양' : '음';
                
                // 자음들의 천간 변환
                const consonants = [initial];
                if (final) consonants.push(final);
                
                let charHTML = `
                    <div class="char-analysis">
                        <div class="char-title">'${char}' 분석 (${totalStrokes}획 - ${yinYangName})</div>
                        <div class="char-details">
                `;
                
                const cheonganList = [];
                
                consonants.forEach(consonant => {
                    const element = consonantToElement[consonant];
                    if (element) {
                        const cheonganHanja = getCheonganHanja(element, isPositive);
                        cheonganList.push(cheonganHanja);
                        
                        charHTML += `
                            <div class="detail-item">
                                <strong>${consonant}</strong> → ${element}${yinYangSymbol} → ${cheonganHanja}
                            </div>
                        `;
                    }
                });
                
                charHTML += '</div>';
                
                // 십성 계산
                if (cheonganList.length > 0) {
                    charHTML += '<div class="sipseong-result">';
                    
                    cheonganList.forEach(cheongan => {
                        // 간지의 간(천간)과 지(지지)에 대해 각각 십성 계산
                        const ganSipseong = calculateSipseong(
                            cheongan + yinYangSymbol, 
                            ganJi.ganHanja + (ganJi.ganHanja.includes('甲丙戊庚壬') ? '+' : '-')
                        );
                        const jiSipseong = calculateSipseong(
                            cheongan + yinYangSymbol,
                            ganJi.jiHanja + (ganJi.jiHanja.includes('寅辰午申戌子') ? '+' : '-')
                        );
                        
                        charHTML += `
                            <div class="sipseong-line">
                                <span class="sipseong-number">${ganSipseong}</span>
                                <span class="sipseong-name">${sipseongNames[ganSipseong]}</span>
                                <span class="char-center">${char}</span>
                                <span class="sipseong-name">${sipseongNames[jiSipseong]}</span>
                                <span class="sipseong-number">${jiSipseong}</span>
                            </div>
                            <div class="sipseong-line">
                                <span class="sipseong-number">${ganSipseong}</span>
                                <span class="sipseong-name">${sipseongNames[ganSipseong]}</span>
                                <span class="char-center">${cheonganList.join('')}</span>
                                <span class="sipseong-name">${sipseongNames[jiSipseong]}</span>
                                <span class="sipseong-number">${jiSipseong}</span>
                            </div>
                        `;
                    });
                    
                    charHTML += '</div>';
                }
                
                charHTML += '</div>';
                resultHTML += charHTML;
            }
            
            document.getElementById('result').innerHTML = resultHTML;
            document.getElementById('result').scrollIntoView({behavior: 'smooth'});
        }
    </script>
</body>
</html>